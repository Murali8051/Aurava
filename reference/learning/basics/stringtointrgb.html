<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>StringToIntRGB \ Learning \ Wiring</title>
		
		<link rel="icon" href="img/wiring-1.ico" type="image/x-icon" />
		<link rel="shortcut icon" href="img/wiring-1.ico" type="image/x-icon" />
		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="Author" content="Hernando Barragán" />
		<meta name="Publisher" content="Wiring" />
		<meta name="Keywords" content="Wiring, Processing, Interactive Media, Electronic Arts, Programming, C, C++, Hernando Barragán" />
		<meta name="Description" content="Wiring is an electronic sketchbook and hardware electronics for developing 
				ideas. It is a context for learning fundamentals of computer programming and prototyping with electronics
				within the context of the electronic arts." />
		<meta name="Copyright" content="All contents copyright Hernando Barragán" />
		
		<script src="../../javascript/MM_functions.js" type="text/javascript"></script>
	
		<link href="../../css/style.css" rel="stylesheet" type="text/css" />
	</head>
	<body id="Basics" onload="" >
		
		<!-- ==================================== PAGE ============================ --> 
		<div id="container">
	
			<!-- ==================================== HEADER ============================ --> 
			<div id="header">
				<a href="../../index.html"><img src="../../img/wiring_cover.gif" alt="Wiring cover" title="Back to the reference index." /></a>
				<form name="search" method="get" action="http://www.google.com/search">
				<label>Search wiring.org.co:</label> 
				       <p><input type="hidden" name="as_sitesearch" value="wiring.org.co" />
				       <input type="text" name="as_q" value="" size="20" class="text" /> 
						<input type="image" src="../../img/search_button.gif" value="Submit" alt="Submit" /></p>
				</form>
			</div> 
						<div id="navigation">
				<div class="navBar" id="mainnav">
					<a href="../../index.html">Framework</a> (<a href="../../alpha.html">A-Z</a>) \ 
					<a href="../../libraries/index.html">Libraries</a> \ 
					<a href="../../environment/index.html">Environment</a> \ 
					<a href="../../learning/index.html" class="active">Learning</a> \
					<a href="../../hardware/index.html">Hardware</a> 
				</div>
				<div class="navBar learning_local" id="subNav">
					 
 Examples: 					<a href="../../learning/basics/index.html" class="active">Basics</a>, 
					<a href="../../learning/libraries/index.html">Library</a>, 
					<a href="../../learning/topics/index.html">Topics</a> 
				</div>
			</div>

		
			<a id="TOP" name="TOP"></a>
			
			<!-- ==================================== CONTENT - Headers ============================ -->
			<div class="content">
			 
			 
<div class="examples-nav-div">
<table width="480" border="0"><tr><td align="left"><table>
<tr><td width="48">&nbsp;</td><td>
<select name="nav" size="1" class="inputnav" onChange="javascript:gogo(this)">
	<optgroup label="Getting Started">
		<option value="blink.html">Blink</option>
		<option value="digitalreadserial.html">Digital read Serial</option>
		<option value="analogreadserial.html">Analog read Serial</option>
		<option value="switch.html">Switch</option>
		<option value="photoresistor.html">Photoresistor</option>
		<option value="fade.html">Fade</option>
	</optgroup>
	<optgroup label="Digital Output">
		<option value="ledblink.html">LED blink</option>
		<option value="ledsequence.html">LED blink sequence</option>
		<option value="ledswing.html">LED swing</option>
		<option value="numericdisplay.html">7 Segment led numerical LED display</option>
		<option value="optocoupler4n35.html">Optocoupler: 4N35</option>
		<option value="relay.html">Relay</option>
		<option value="lightbulb.html">120-240 VAC Light bulb: TRIAC</option>
		<option value="mosfetirld024.html">MOSFET: IRLD024</option>
		<option value="ledport.html">LED Port</option>
		<option value="tonekeyboard.html">Tone keyboard</option>
		<option value="tonemelody.html">Tone melody</option>
		<option value="tonemultiple.html">Tone multiple</option>
		<option value="tonepitchfollower.html">Tone pitch follower</option>
	</optgroup>
	<optgroup label="Analog Input">
		<option value="potentiometer.html">Potentiometer</option>
		<option value="calibration.html">Sensor calibration</option>
		<option value="smooth.html">Smooth sensor readings</option>
		<option value="forceresistor.html">Force Resistor</option>
		<option value="airqualitymq135.html">Air quality sensor: MQ135</option>
		<option value="rangersharp.html">Infrared ranger (distance/presence): SHARP GP2D12/120</option>
		<option value="piezofilm.html">PiezoFilm (touch/vibration): MSIUSA piezo film</option>
		<option value="phototransistor.html">Phototransistor</option>
		<option value="microphone.html">Microphone (sound sensor)</option>
		<option value="electretmicrophone.html">Electret Microphone: Sparkfun</option>
		<option value="ambientlighttemt6000.html">Ambient light sensor: Sparkfun TEMT6000</option>
		<option value="accelerometer.html">ADXL335 Accelerometer: Sparkfun</option>
		<option value="gyroadxrs610.html">ADXRS610 Gyroscope: Sparkfun</option>
		<option value="gyroidg500.html">IDG500 Gyroscope: Sparkfun</option>
		<option value="gyroidg1215.html">IDG1215 Gyroscope: Sparkfun</option>
		<option value="gyroixz500.html">IXZ500 Gyroscope: Sparkfun</option>
		<option value="gyrolisy300al.html">LISY300AL Gyroscope: Sparkfun</option>
		<option value="airpressure.html">Air pressure: Motorola</option>
		<option value="rangerleds.html">Infrared ranger & LEDs</option>
		<option value="potentiometerled.html">Potentiometer & LED</option>
		<option value="lowcurrentacs712.html">Low current sensor: Sparkfun ACS712</option>
		<option value="currentacs712.html">Current sensor: Sparkfun ACS712</option>
	</optgroup>
	<optgroup label="Digital Input">
		<option value="switch.html">Switch (button)</option>
		<option value="multipleswitches.html">Multiple switches</option>
		<option value="hallsensor.html">Hall effect sensor</option>
		<option value="parallaxping.html">distance (proximity) sensor: Parallax ping</option>
		<option value="opticalsensor.html">Transmissive optical sensor</option>
	</optgroup>
	<optgroup label="Analog Output">
		<option value="rgbled.html">RGB LED</option>
		<option value="motorspeed.html">Motor speed</option>
		<option value="stretchlight.html">Stretch sensor & LEDs</option>
		<option value="inverselight.html">Light sensor & LED</option>
	</optgroup>
	<optgroup label="Structure">
		<option value="statementscomments.html">Statements and comments</option>
		<option value="setuploop.html">Setup and Loop</option>
		<option value="loop.html">Loop</option>
		<option value="functions.html">Functions</option>
	</optgroup>
	<optgroup label="Data">
		<option value="variables.html">Variables</option>
		<option value="integersfloats.html">Integers and floats</option>
		<option value="truefalse.html">True/False</option>
		<option value="charactersstrings.html">Characters and Strings</option>
		<option value="characterclassification.html">Character classification</option>
		<option value="datatypeconversion.html">Datatype conversion</option>
		<option value="variablescope.html">Variable scope</option>
		<option value="arrays.html">Arrays</option>
		<option value="vectors.html">Vectors</option>
		<option value="splitstring.html">Split a string and convert it to numbers</option>
		<option value="array2d.html">Bidimensional arrays</option>
		<option value="arraypassing.html">Passing an array to a function</option>
	</optgroup>
	<optgroup label="Data/Strings">
		<option value="stringadditionoperator.html">Add strings together</option>
		<option value="stringappendoperator.html">Appending to Strings</option>
		<option value="stringcasechanges.html">Change the case of a string</option>
		<option value="stringcharacters.html">Characters and Strings</option>
		<option value="stringcomparisonoperators.html">Compare strings</option>
		<option value="stringconstructors.html">Create strings from other data types</option>
		<option value="stringindexof.html">Evaluate, look for, and replace characters in a String</option>
		<option value="stringlength.html">length() in a String</option>
		<option value="stringlengthtrim.html">length() and trim() in a String</option>
		<option value="stringreplace.html">Replace characters or substrings of a string</option>
		<option value="stringstartswithendswith.html">startsWith() and endsWith() in a String</option>
		<option value="stringsubstring.html">Substring in a String</option>
	</optgroup>
	<optgroup label="Control">
		<option value="iteration.html">Iteration</option>
		<option value="iterateoutputs.html">Iterate through digital outputs</option>
		<option value="iterateinputs.html">Iterate through digital inputs</option>
		<option value="conditionals.html">Conditionals</option>
		<option value="logicaloperators.html">Logical operators</option>
	</optgroup>
	<optgroup label="Math">
		<option value="incrementdecrement.html">Increment/Decrement</option>
		<option value="operatorprecedence.html">Operator precedence</option>
		<option value="modulo.html">Modulo</option>
		<option value="sinecosine.html">Sine and Cosine</option>
		<option value="random.html">Random</option>
	</optgroup>
	<optgroup label="Digital Advanced">
		<option value="shiftregister.html">Shift Register: 74LS595</option>
		<option value="sfr0405ranger.html">Ultrasonic ranger: SFR04/SFR05</option>
		<option value="magneticfield.html">Magnetic field sensor: micromag 3-axis</option>
		<option value="humiditytemperaturesht15.html">Humidity & Temperature: Sparkfun SHT15</option>
		<option value="humiditytemperaturesht11.html">Humidity & Temperature: Parallax SHT11</option>
		<option value="rgbbackpack.html">RGB LED matrix: Sparkfun RGB LED backpack</option>
	</optgroup>
	<optgroup label="Interrupts">
		<option value="externalinterrupts.html">Attending external interrupts</option>
	</optgroup>
	<optgroup label="Timing">
		<option value="timer.html">Timer</option>
		<option value="timerblink.html">LED blink w/timer</option>
	</optgroup>
	<optgroup label="Serial">
		<option value="simpleread.html">Simple read</option>
		<option value="simplewrite.html">Simple write</option>
		<option value="simplereadwrite.html">Simple read & write</option>
		<option value="advancedoutput.html">Advanced output</option>
		<option value="multipleports.html">Multiple Ports</option>
		<option value="photoresistorserial.html">Photoresistor & Serial</option>
		<option value="readstring.html">Reading a string</option>
		<option value="sendingmultipledata.html">Sending multiple values to Processing</option>
		<option value="serialreadprocessing.html">Reading data from Processing</option>
		<option value="serialrfid.html">RFID reader: parallax</option>
		<option value="serialweather.html">Sparkfun USB weather board</option>
		<option value="serialwriteprocessing.html">Writing data to Processing</option>
		<option value="midi.html">Sending MIDI notes</option>
	</optgroup>
</select>

</td></tr></table></td></tr></table></div>

<p class="ref-notice">This example is for Wiring version 1.0 build 0100+. If you have a previous version, use the examples included with your software. <em>If you see any errors or have comments, please <a href="http://forum.wiring.co/index.php/board,13.0.html">let us know</a>.</em></p>


<div class="example">Serial RGB controller by Tom Igoe <br />
<br />
 Reads a serial input string looking for three comma-separated integers with a newline at the end. Values should be between 0 and 255. The sketch uses those values to set the color of an RGB LED attached to pins 4 - 6. The circuit: Common-anode RGB LED cathodes attached to pins 4 - 6 LED anode connected to pin 13 To turn on any given channel, set the pin LOW. To turn off, set the pin HIGH. The higher the analogWrite level, the lower the brightness.</p>
<p></p>

<p class="doc">
<pre class="code">
<span class='keyword1'>String</span> inString = <span class='literal'>""</span>;    <span class='comment'>// string to hold input</span>
<span class='keyword1'>int</span> currentColor = 0;
<span class='keyword1'>int</span> red, green, blue = 0;

<span class='keyword1'>void</span> <span class='keyword2'>setup</span>()
{
  <span class='comment'>// Initialize serial communications:</span>
  <span class='keyword1'>Serial</span>.<span class='keyword2'>begin</span>(9600);
  <span class='comment'>// set LED cathode pins as outputs:</span>
  <span class='keyword2'>pinMode</span>(4, <span class='literal2'>OUTPUT</span>);
  <span class='keyword2'>pinMode</span>(5, <span class='literal2'>OUTPUT</span>);
  <span class='keyword2'>pinMode</span>(6, <span class='literal2'>OUTPUT</span>);
  <span class='comment'>// turn on pin 13 to power the LEDs:</span>
  <span class='keyword2'>pinMode</span>(13, <span class='literal2'>OUTPUT</span>);
  <span class='keyword2'>digitalWrite</span>(13, <span class='literal2'>HIGH</span>);
}

<span class='keyword1'>void</span> <span class='keyword2'>loop</span>()
{
  <span class='keyword1'>int</span> inChar;

  <span class='comment'>// Read serial input:</span>
  <span class='keyword1'>if</span> (<span class='keyword1'>Serial</span>.<span class='keyword2'>available</span>() &gt; 0)
  {
    inChar = <span class='keyword1'>Serial</span>.<span class='keyword2'>read</span>();
  }

  <span class='keyword1'>if</span> (<span class='keyword2'>isDigit</span>(inChar))
  {
    <span class='comment'>// convert the incoming <span class='keyword1'>byte</span> to a <span class='keyword1'>char</span></span>
    <span class='comment'>// and <span class='keyword2'>add</span> it to the string:</span>
    inString += (<span class='keyword1'>char</span>)inChar;
  }

  <span class='comment'>// <span class='keyword1'>if</span> you <span class='keyword2'>get</span> a comma, convert to a number,</span>
  <span class='comment'>// set the appropriate color, and increment</span>
  <span class='comment'>// the color counter:</span>
  <span class='keyword1'>if</span> (inChar == ',')
  {
    <span class='comment'>// <span class='keyword1'>do</span> something different <span class='keyword1'>for</span> each value of currentColor:</span>
    <span class='keyword1'>switch</span> (currentColor)
    {
    <span class='keyword1'>case</span> 0:    <span class='comment'>// 0 = red</span>
      red = inString.<span class='keyword2'>toInt</span>();
      <span class='comment'>// <span class='keyword2'>clear</span> the string <span class='keyword1'>for</span> <span class='keyword1'>new</span> input:</span>
      inString = <span class='literal'>""</span>;
      <span class='keyword1'>break</span>;
    <span class='keyword1'>case</span> 1:    <span class='comment'>// 1 = green:</span>
      green = inString.<span class='keyword2'>toInt</span>();
      <span class='comment'>// <span class='keyword2'>clear</span> the string <span class='keyword1'>for</span> <span class='keyword1'>new</span> input:</span>
      inString = <span class='literal'>""</span>;
      <span class='keyword1'>break</span>;
    }
    currentColor++;
  }
  <span class='comment'>// <span class='keyword1'>if</span> you <span class='keyword2'>get</span> a newline, you know you've got</span>
  <span class='comment'>// the last color, i.e. blue:</span>
  <span class='keyword1'>if</span> (inChar == '\n')
  {
    blue = inString.<span class='keyword2'>toInt</span>();

    <span class='comment'>// set the levels of the LED.</span>
    <span class='comment'>// subtract value from 255 because a higher</span>
    <span class='comment'>// <span class='keyword2'>analogWrite</span> level means a dimmer LED, since</span>
    <span class='comment'>// you're raising the level on the anode:</span>
    <span class='keyword2'>analogWrite</span>(4, 255 - red);
    <span class='keyword2'>analogWrite</span>(5, 255 - green);
    <span class='keyword2'>analogWrite</span>(6, 255 - blue);

    <span class='comment'>// <span class='keyword2'>print</span> the colors:</span>
    <span class='keyword1'>Serial</span>.<span class='keyword2'>print</span>(<span class='literal'>"Red: "</span>);
    <span class='keyword1'>Serial</span>.<span class='keyword2'>print</span>(red);
    <span class='keyword1'>Serial</span>.<span class='keyword2'>print</span>(<span class='literal'>", Green: "</span>);
    <span class='keyword1'>Serial</span>.<span class='keyword2'>print</span>(green);
    <span class='keyword1'>Serial</span>.<span class='keyword2'>print</span>(<span class='literal'>", Blue: "</span>);
    <span class='keyword1'>Serial</span>.<span class='keyword2'>println</span>(blue);

    <span class='comment'>// <span class='keyword2'>clear</span> the string <span class='keyword1'>for</span> <span class='keyword1'>new</span> input:</span>
    inString = <span class='literal'>""</span>;
    <span class='comment'>// reset the color counter:</span>
    currentColor = 0;

  }

}


<span class='comment'>/*
Here's a Processing sketch that will draw a color wheel and send a serial
string with the color you click on:

<span class='comment'>// Subtractive Color Wheel with <span class='keyword1'>Serial</span></span>
<span class='comment'>// Based on a Processing example by Ira Greenberg.</span>
<span class='comment'>// <span class='keyword1'>Serial</span> output added by Tom Igoe</span>
<span class='comment'>//</span>
<span class='comment'>// The primaries are red, yellow, and blue. The secondaries are green,</span>
<span class='comment'>// purple, and orange. The tertiaries are  yellow-orange, red-orange,</span>
<span class='comment'>// red-purple, blue-purple, blue-green, and yellow-green.</span>
<span class='comment'>//</span>
<span class='comment'>// Create a shade or tint of the subtractive color wheel <span class='keyword2'>using</span></span>
<span class='comment'>// SHADE or TINT parameters.</span>

<span class='comment'>// Updated 29 November 2010.</span>



import processing.serial.*;

<span class='keyword1'>int</span> segs = 12;
<span class='keyword1'>int</span> steps = 6;
<span class='keyword2'><span class='keyword1'>float</span></span> rotAdjust = <span class='literal2'>TWO_PI</span> / segs / 2;
<span class='keyword2'><span class='keyword1'>float</span></span> radius;
<span class='keyword2'><span class='keyword1'>float</span></span> segWidth;
<span class='keyword2'><span class='keyword1'>float</span></span> interval = <span class='literal2'>TWO_PI</span> / segs;

<span class='keyword1'>Serial</span> myPort;

<span class='keyword1'>void</span> <span class='keyword2'>setup</span>() {
  <span class='keyword2'>size</span>(200, 200);
  background(127);
  smooth();
  ellipseMode(RADIUS);
  noStroke();
  <span class='comment'>// make the diameter 90% of the sketch area</span>
  radius = <span class='keyword2'>min</span>(width, height) * 0.45;
  segWidth = radius / steps;

  <span class='comment'>// swap which line is commented out to draw the other version</span>
  <span class='comment'>// drawTintWheel();</span>
  drawShadeWheel();
  <span class='comment'>// open the first serial port in your computer's list</span>
  myPort = <span class='keyword1'>new</span> <span class='keyword1'>Serial</span>(<span class='literal2'><span class='keyword1'>this</span></span>, <span class='keyword1'>Serial</span>.list()[0], 9600);
}


<span class='keyword1'>void</span> drawShadeWheel() {
  <span class='keyword1'>for</span> (<span class='keyword1'>int</span> j = 0; j &lt; steps; j++) {
    color[] cols = {
      color(255-(255/steps)*j, 255-(255/steps)*j, 0),
      color(255-(255/steps)*j, (255/1.5)-((255/1.5)/steps)*j, 0),
      color(255-(255/steps)*j, (255/2)-((255/2)/steps)*j, 0),
      color(255-(255/steps)*j, (255/2.5)-((255/2.5)/steps)*j, 0),
      color(255-(255/steps)*j, 0, 0),
      color(255-(255/steps)*j, 0, (255/2)-((255/2)/steps)*j),
      color(255-(255/steps)*j, 0, 255-(255/steps)*j),
      color((255/2)-((255/2)/steps)*j, 0, 255-(255/steps)*j),
      color(0, 0, 255-(255/steps)*j),
      color(0, 255-(255/steps)*j, (255/2.5)-((255/2.5)/steps)*j),
      color(0, 255-(255/steps)*j, 0),
      color((255/2)-((255/2)/steps)*j, 255-(255/steps)*j, 0)
    };
    <span class='keyword1'>for</span> (<span class='keyword1'>int</span> i = 0; i &lt; segs; i++) {
      fill(cols[i]);
      arc(width/2, height/2, radius, radius,
      interval*i+rotAdjust, interval*(i+1)+rotAdjust);
    }
    radius -= segWidth;
  }
}


<span class='keyword1'>void</span> drawTintWheel() {
  <span class='keyword1'>for</span> (<span class='keyword1'>int</span> j = 0; j &lt; steps; j++) {
    color[] cols = {
      color((255/steps)*j, (255/steps)*j, 0),
      color((255/steps)*j, ((255/1.5)/steps)*j, 0),
      color((255/steps)*j, ((255/2)/steps)*j, 0),
      color((255/steps)*j, ((255/2.5)/steps)*j, 0),
      color((255/steps)*j, 0, 0),
      color((255/steps)*j, 0, ((255/2)/steps)*j),
      color((255/steps)*j, 0, (255/steps)*j),
      color(((255/2)/steps)*j, 0, (255/steps)*j),
      color(0, 0, (255/steps)*j),
      color(0, (255/steps)*j, ((255/2.5)/steps)*j),
      color(0, (255/steps)*j, 0),
      color(((255/2)/steps)*j, (255/steps)*j, 0)
    };
    <span class='keyword1'>for</span> (<span class='keyword1'>int</span> i = 0; i &lt; segs; i++) {
      fill(cols[i]);
      arc(width/2, height/2, radius, radius,
      interval*i+rotAdjust, interval*(i+1)+rotAdjust);
    }
    radius -= segWidth;
  }
}

<span class='keyword1'>void</span> draw() {
  <span class='comment'>// nothing happens here</span>
}

<span class='keyword1'>void</span> mouseReleased() {
  <span class='comment'>// <span class='keyword2'>get</span> the color of the mouse position's pixel:</span>
  color targetColor = <span class='keyword2'>get</span>(mouseX, mouseY);
  <span class='comment'>// <span class='keyword2'>get</span> the component values:</span>
  <span class='keyword1'>int</span> r = <span class='keyword1'>int</span>(red(targetColor));
  <span class='keyword1'>int</span> g = <span class='keyword1'>int</span>(green(targetColor));
  <span class='keyword1'>int</span> b = <span class='keyword1'>int</span>(blue(targetColor));
  <span class='comment'>// make a comma-separated string:</span>
  <span class='keyword1'>String</span> colorString = r + "," + g + "," + b + "\n";
  <span class='comment'>// send it out the serial port:</span>
  myPort.<span class='keyword2'>write</span>(colorString );
}


*/</span>
</pre>


</div>


			
			</div>

			<!-- ==================================== FOOTER ============================ --> 
  			<div id="footer">
    			<div id="copyright">Wiring is an open project initiated by <a href="http://barraganstudio.com" target="_blank">Hernando Barrag&aacute;n</a>. It is developed by a <a href="http://wiring.org.co/about.html">small team of volunteers</a>.</div>  
		  <div id="colophon">

                    <a href="../../copyright.html">&copy; Info</a>, Processing <a href="http://processing.org/copyright.html">&copy; Info</a></div>
		  </div>
  			
		</div>
	</body>
</html>
